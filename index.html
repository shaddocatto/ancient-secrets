<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amber RPG Character Builder</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Ancient Secrets</h1>
        <p class="subtitle">Character Creation System - 60 Points</p>
        
        <div class="points-display">
            <h3>Point Budget</h3>
            <div class="points-remaining" id="pointsRemaining">60</div>
            <div id="pointsStatus"></div>
            <div class="save-status" id="saveStatus">Auto-saving...</div>
        </div>

        <!-- Heritage Selection -->
        <div class="section">
            <h2>Heritage</h2>
            <div class="form-group">
                <label for="heritage">Choose your Heritage:</label>
                <select id="heritage" onchange="updateHeritage()">
                    <option value="">Select Heritage...</option>
                    <option value="recognized-amber">Recognized Amber (free - Court position, Blood Curse, Slow Regeneration, Pattern Adept)</option>
                    <option value="unrecognized-amber">Unrecognized Amber (credit 5 pts - Blood Curse, Slow Regeneration, see GM)</option>
                    <option value="chaos">Chaos (credit 2 pts - Shapeshifting free)</option>
                    <option value="both">Both Amber and Chaos (cost 3 pts - Recognized, Court position, Blood Curse, Slow Regeneration, Pattern, and Shapeshifting)</option>
                    <option value="other">Other (credit 6 pts - work with GM to create)</option>
                </select>
                <div id="heritageInfo" class="heritage-info" style="display: none;"></div>
            </div>
        </div>

        <!-- Character Aspects -->
        <div class="section">
            <h2>Character Aspects</h2>
            <div class="form-group">
                <label for="concept">Concept (Who are you? What do you do?):</label>
                <input type="text" id="concept" placeholder="e.g., Wandering swordsman seeking redemption">
            </div>
            <div class="form-group">
                <label for="position">Position (What are you to the family and court?):</label>
                <input type="text" id="position" placeholder="e.g., Bastard child seeking recognition">
            </div>
            <div class="form-group">
                <label for="trouble">Trouble (What gets you into trouble?):</label>
                <input type="text" id="trouble" placeholder="e.g., Cannot resist a challenge to my honor">
            </div>
            <div class="form-group">
                <label for="goal">Goal (What are you trying to get done?):</label>
                <input type="text" id="goal" placeholder="e.g., Restore the lost Shadow of my mother">
            </div>
            <div class="form-group">
                <label for="secret">Secret (What are you hiding? Free invoke when revealed):</label>
                <input type="text" id="secret" placeholder="e.g., I am the true heir to the throne of a fallen Shadow">
            </div>
        </div>

        <!-- Skills -->
        <div class="section">
            <h2>Skills (Max +12)</h2>
            <p style="margin-bottom: 20px; color: #cccccc;">Costs 1 point for each +1 ranked above Amber (0). Human (-3), Chaos (-1), Amber (0), and above.</p>
            <div class="skill-container">
                <div class="skill-item">
                    <label for="strength">Strength</label>
                    <div class="skill-description">Physique, athletics, toughness, hand-to-hand combat</div>
                    <input type="number" id="strength" min="-3" max="12" value="0" onchange="updateSkills()">
                    <div class="skill-cost" id="strengthCost">Cost: 0 points</div>
                </div>
                <div class="skill-item">
                    <label for="warfare">Warfare</label>
                    <div class="skill-description">Leadership, tactics, strategy, vehicles, riding, weapons combat</div>
                    <input type="number" id="warfare" min="-3" max="12" value="0" onchange="updateSkills()">
                    <div class="skill-cost" id="warfareCost">Cost: 0 points</div>
                </div>
                <div class="skill-item">
                    <label for="psyche">Psyche</label>
                    <div class="skill-description">Focus, discipline, will, empathy, mystical power and potential</div>
                    <input type="number" id="psyche" min="-3" max="12" value="0" onchange="updateSkills()">
                    <div class="skill-cost" id="psycheCost">Cost: 0 points</div>
                </div>
                <div class="skill-item">
                    <label for="endurance">Endurance</label>
                    <div class="skill-description">Resilience, tenacity, physical/mental reserves, stress</div>
                    <input type="number" id="endurance" min="-3" max="12" value="0" onchange="updateSkills()">
                    <div class="skill-cost" id="enduranceCost">Cost: 0 points</div>
                </div>
                <div class="skill-item">
                    <label for="status">Status</label>
                    <div class="skill-description">Contacts, charm, convincing, reputation, resources, dominion</div>
                    <input type="number" id="status" min="-3" max="12" value="0" onchange="updateSkills()">
                    <div class="skill-cost" id="statusCost">Cost: 0 points</div>
                </div>
                <div class="skill-item">
                    <label for="intrigue">Intrigue</label>
                    <div class="skill-description">Deceit, espionage, secrets, manipulation, leverage, skulduggery</div>
                    <input type="number" id="intrigue" min="-3" max="12" value="0" onchange="updateSkills()">
                    <div class="skill-cost" id="intrigueCost">Cost: 0 points</div>
                </div>
                <div class="skill-item">
                    <label for="hunting">Hunting</label>
                    <div class="skill-description">Train Animal, survival, tracking, riding, ambush, hunting weapons</div>
                    <input type="number" id="hunting" min="-3" max="12" value="0" onchange="updateSkills()">
                    <div class="skill-cost" id="huntingCost">Cost: 0 points</div>
                </div>
                <div class="skill-item">
                    <label for="lore">Lore</label>
                    <div class="skill-description">Knowledge, occult understanding, crafting, engineering, medicine</div>
                    <input type="number" id="lore" min="-3" max="12" value="0" onchange="updateSkills()">
                    <div class="skill-cost" id="loreCost">Cost: 0 points</div>
                </div>
            </div>
        </div>

        <!-- Powers -->
        <div class="section">
            <h2>Powers</h2>
            <p style="margin-bottom: 20px; color: #cccccc;">All Powers require appropriate Heritage and/or Permission Aspect to access. Once accessed, you can spend points to increase your level (1 pt per level, max +12).</p>
            <div class="powers-grid">
                <!-- Powers of Order -->
                <div class="power-category">
                    <h3>Powers of Order</h3>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="pattern-adept" onchange="updatePowers()" data-cost="5" data-prereq="">
                            <span class="power-cost" id="pattern-adept-cost">5</span>
                            Pattern Adept
                        </label>
                        <div class="power-description">Requires: Amber Heritage; Amber (0) Endurance. Shadow Travel, Hellride, Shadow of Desire, Resources, Manipulate Probability, Pattern Psychic Defense</div>
                        <div class="power-level-container">
                            <label for="pattern-adept-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="pattern-adept-level" min="0" max="12" value="0" onchange="updatePowerLevel('pattern-adept')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="advanced-pattern" onchange="updatePowers()" data-cost="7" data-prereq="pattern-adept" data-credit="pattern-adept:-5">
                            <span class="power-cost" id="advanced-pattern-cost">7</span>
                            Advanced Pattern Adept
                        </label>
                        <div class="power-description">Requires: Pattern Adept; Amber (0) Psyche. Pattern Lens, Mold Shadow, Walk the Pattern of the mind, Edit Pattern</div>
                        <div class="power-level-container">
                            <label for="advanced-pattern-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="advanced-pattern-level" min="0" max="12" value="0" onchange="updatePowerLevel('advanced-pattern')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="warden-stair" onchange="updatePowers()" data-cost="1" data-credit="pattern-adept:-1">
                            <span class="power-cost" id="warden-stair-cost">1</span>
                            Warden of the Grand Stair
                        </label>
                        <div class="power-description">Requires: Amber (0) Psyche. Open and Close Doors, Wayfinding, Piercing Veil, Exegesis</div>
                        <div class="power-level-container">
                            <label for="warden-stair-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="warden-stair-level" min="0" max="12" value="0" onchange="updatePowerLevel('warden-stair')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="master-stair" onchange="updatePowers()" data-cost="3" data-prereq="warden-stair" data-credit="warden-stair:-1">
                            <span class="power-cost" id="master-stair-cost">3</span>
                            Master of the Grand Stair
                        </label>
                        <div class="power-description">Requires: Warden; Amber (0) Psyche, Chaos (-1) Endurance. Ward Doors, Control Doors, Making Keys, Advanced abilities</div>
                        <div class="power-level-container">
                            <label for="master-stair-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="master-stair-level" min="0" max="12" value="0" onchange="updatePowerLevel('master-stair')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="eidolon-mastery" onchange="updatePowers()" data-cost="8" data-credit="pattern-adept:-4,advanced-pattern:-6">
                            <span class="power-cost" id="eidolon-mastery-cost">8</span>
                            Eidolon Mastery
                        </label>
                        <div class="power-description">Requires: Amber (0) Psyche. Immortality, Edit reality, Guide reality, Sanctification</div>
                        <div class="power-level-container">
                            <label for="eidolon-mastery-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="eidolon-mastery-level" min="0" max="12" value="0" onchange="updatePowerLevel('eidolon-mastery')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                </div>

                <!-- Powers of Chaos -->
                <div class="power-category">
                    <h3>Powers of Chaos</h3>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="shapeshifting" onchange="updatePowers()" data-cost="3" data-prereq="">
                            <span class="power-cost" id="shapeshifting-cost">3</span>
                            Shapeshifting
                        </label>
                        <div class="power-description">Requires: Chaos Heritage; Chaos (-1) Strength and Endurance. Assume Known Shape, Automatic Shifting, Demon Form, Healing, Primal Form</div>
                        <div class="power-level-container">
                            <label for="shapeshifting-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="shapeshifting-level" min="0" max="12" value="0" onchange="updatePowerLevel('shapeshifting')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="advanced-shapeshifting" onchange="updatePowers()" data-cost="6" data-prereq="shapeshifting" data-credit="shapeshifting:-3">
                            <span class="power-cost" id="advanced-shapeshifting-cost">6</span>
                            Advanced Shapeshifting
                        </label>
                        <div class="power-description">Requires: Shapeshifting; Amber (0) Strength, Endurance, Psyche. Duplicate Other, Shape Aura, Shape Other</div>
                        <div class="power-level-container">
                            <label for="advanced-shapeshifting-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="advanced-shapeshifting-level" min="0" max="12" value="0" onchange="updatePowerLevel('advanced-shapeshifting')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="logrus-master" onchange="updatePowers()" data-cost="4" data-prereq="shapeshifting">
                            <span class="power-cost" id="logrus-master-cost">4</span>
                            Logrus Master
                        </label>
                        <div class="power-description">Requires: Shapeshifting; Amber (0) Psyche, Chaos (-1) Endurance. Logrus Tendrils, Hang Spells, Find in Shadow</div>
                        <div class="power-level-container">
                            <label for="logrus-master-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="logrus-master-level" min="0" max="12" value="0" onchange="updatePowerLevel('logrus-master')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="advanced-logrus" onchange="updatePowers()" data-cost="7" data-prereq="logrus-master" data-credit="logrus-master:-4">
                            <span class="power-cost" id="advanced-logrus-cost">7</span>
                            Advanced Logrus Master
                        </label>
                        <div class="power-description">Requires: Logrus Master; Amber (0) Psyche and Endurance. Alter Shadow, Create Primal Chaos, Logrus Healing</div>
                        <div class="power-level-container">
                            <label for="advanced-logrus-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="advanced-logrus-level" min="0" max="12" value="0" onchange="updatePowerLevel('advanced-logrus')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="umbra-mastery" onchange="updatePowers()" data-cost="8" data-credit="shapeshifting:-2,logrus-master:-3,advanced-logrus:-5">
                            <span class="power-cost" id="umbra-mastery-cost">8</span>
                            Umbra Mastery
                        </label>
                        <div class="power-description">Requires: Amber (0) Psyche. Perceiving Umbra, Control Reality, Evolution, Immortality, Regeneration</div>
                        <div class="power-level-container">
                            <label for="umbra-mastery-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="umbra-mastery-level" min="0" max="12" value="0" onchange="updatePowerLevel('umbra-mastery')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                </div>

                <!-- Powers of Art -->
                <div class="power-category">
                    <h3>Powers of Art</h3>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="trump-artist" onchange="updatePowers()" data-cost="4" data-prereq="">
                            <span class="power-cost" id="trump-artist-cost">4</span>
                            Trump Artist
                        </label>
                        <div class="power-description">Requires: Chaos (-1) Psyche. Create Trump, Identify Trump, Imbue Trump Artifacts, Trump Defense</div>
                        <div class="power-level-container">
                            <label for="trump-artist-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="trump-artist-level" min="0" max="12" value="0" onchange="updatePowerLevel('trump-artist')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="advanced-trump" onchange="updatePowers()" data-cost="6" data-prereq="trump-artist" data-credit="trump-artist:-2">
                            <span class="power-cost" id="advanced-trump-cost">6</span>
                            Advanced Trump Artist
                        </label>
                        <div class="power-description">Requires: Trump Artist; Amber (0) Psyche. Trump Gate, Trump Jamming, Trump Memory, Trump Trap</div>
                        <div class="power-level-container">
                            <label for="advanced-trump-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="advanced-trump-level" min="0" max="12" value="0" onchange="updatePowerLevel('advanced-trump')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="wrighting" onchange="updatePowers()" data-cost="4" data-credit="trump-artist:-2,advanced-trump:-3">
                            <span class="power-cost" id="wrighting-cost">4</span>
                            Wrighting
                        </label>
                        <div class="power-description">Requires: Amber (0) Psyche. Create Icon, Impromptu Icon, Defense, Creating Icon-Powered Artifacts</div>
                        <div class="power-level-container">
                            <label for="wrighting-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="wrighting-level" min="0" max="12" value="0" onchange="updatePowerLevel('wrighting')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                </div>

                <!-- Powers of the Abyss -->
                <div class="power-category">
                    <h3>Powers of the Abyss</h3>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="abyssal-lord" onchange="updatePowers()" data-cost="4" data-prereq="">
                            <span class="power-cost" id="abyssal-lord-cost">4</span>
                            Abyssal Lord
                        </label>
                        <div class="power-description">Requires: Initiation into the Abyss; Amber (0) Psyche, Chaos (-1) Endurance. Summon/Control Souls/Dead, Abyssal Power, Teleportation</div>
                        <div class="power-level-container">
                            <label for="abyssal-lord-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="abyssal-lord-level" min="0" max="12" value="0" onchange="updatePowerLevel('abyssal-lord')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="abyssal-sovereign" onchange="updatePowers()" data-cost="6" data-prereq="abyssal-lord" data-credit="abyssal-lord:-4">
                            <span class="power-cost" id="abyssal-sovereign-cost">6</span>
                            Abyssal Sovereign
                        </label>
                        <div class="power-description">Requires: Abyssal Lord; Amber (0) Psyche and Endurance. Create Abyssal Constructs, Imbue with Abyssal Power, Soul Jar</div>
                        <div class="power-level-container">
                            <label for="abyssal-sovereign-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="abyssal-sovereign-level" min="0" max="12" value="0" onchange="updatePowerLevel('abyssal-sovereign')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                </div>

                <!-- Powers of the Void -->
                <div class="power-category">
                    <h3>Powers of the Void</h3>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="undershadow-manipulator" onchange="updatePowers()" data-cost="3" data-prereq="">
                            <span class="power-cost" id="undershadow-manipulator-cost">3</span>
                            Undershadow Manipulator
                        </label>
                        <div class="power-description">Requires: Amber (0) Psyche, Chaos (-1) Status. Open Portal, Summon/Bind Undershadow Creatures</div>
                        <div class="power-level-container">
                            <label for="undershadow-manipulator-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="undershadow-manipulator-level" min="0" max="12" value="0" onchange="updatePowerLevel('undershadow-manipulator')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="advanced-undershadow" onchange="updatePowers()" data-cost="5" data-prereq="undershadow-manipulator" data-credit="undershadow-manipulator:-3">
                            <span class="power-cost" id="advanced-undershadow-cost">5</span>
                            Advanced Undershadow Manipulator
                        </label>
                        <div class="power-description">Requires: Undershadow Manipulator; Amber (0) Psyche and Status. Manipulate Undershadow, Imbue Undershadow, Scry Undershadow</div>
                        <div class="power-level-container">
                            <label for="advanced-undershadow-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="advanced-undershadow-level" min="0" max="12" value="0" onchange="updatePowerLevel('advanced-undershadow')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="keeper-void" onchange="updatePowers()" data-cost="4" data-credit="undershadow-manipulator:-1,advanced-undershadow:-2">
                            <span class="power-cost" id="keeper-void-cost">4</span>
                            Keeper of the Void
                        </label>
                        <div class="power-description">Requires: Initiation into the Void; Amber (0) Psyche, Chaos (-1) Endurance. Find rift into Void, Survive Void, Communicate with creatures of the deep, Command Undershadow and Void creatures</div>
                        <div class="power-level-container">
                            <label for="keeper-void-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="keeper-void-level" min="0" max="12" value="0" onchange="updatePowerLevel('keeper-void')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                </div>

                <!-- Powers of the Tree -->
                <div class="power-category">
                    <h3>Powers of the Tree</h3>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="thraell-green" onchange="updatePowers()" data-cost="0" data-prereq="">
                            <span class="power-cost" id="thraell-green-cost">Free</span>
                            Thraell of The Green
                        </label>
                        <div class="power-description">Requires: Initiation into the Green; Chaos (-1) Strength and Endurance. Communicate with nature, manifest the Green</div>
                        <div class="power-level-container">
                            <label for="thraell-green-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="thraell-green-level" min="0" max="12" value="0" onchange="updatePowerLevel('thraell-green')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="ally-tree" onchange="updatePowers()" data-cost="3" data-credit="thraell-green:-1">
                            <span class="power-cost" id="ally-tree-cost">3</span>
                            Ally of The Tree
                        </label>
                        <div class="power-description">Requires: Mutual agreement; Amber (0) Strength and Endurance. Commune with Green, Travel within Green, Sustain Green</div>
                        <div class="power-level-container">
                            <label for="ally-tree-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="ally-tree-level" min="0" max="12" value="0" onchange="updatePowerLevel('ally-tree')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                </div>

                <!-- Powers of the Hunger -->
                <div class="power-category">
                    <h3>Powers of the Hunger</h3>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="vampiric-affliction" onchange="updatePowers()" data-cost="1" data-prereq="">
                            <span class="power-cost" id="vampiric-affliction-cost">1</span>
                            Vampiric Affliction
                        </label>
                        <div class="power-description">Requires: Vampire Heritage; Chaos (-1) Endurance. Enhance using blood, entrance weaker wills, shapeshift, damaged by sunlight</div>
                        <div class="power-level-container">
                            <label for="vampiric-affliction-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="vampiric-affliction-level" min="0" max="12" value="0" onchange="updatePowerLevel('vampiric-affliction')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="advanced-vampiric" onchange="updatePowers()" data-cost="3" data-prereq="vampiric-affliction">
                            <span class="power-cost" id="advanced-vampiric-cost">3</span>
                            Advanced Vampiric Affliction
                        </label>
                        <div class="power-description">Requires: Vampiric Affliction; Amber (0) Endurance, Chaos (-1) Strength and Status. Control lesser vampires, invoke Hunger, blood sorcery</div>
                        <div class="power-level-container">
                            <label for="advanced-vampiric-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="advanced-vampiric-level" min="0" max="12" value="0" onchange="updatePowerLevel('advanced-vampiric')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                </div>

                <!-- Powers of Faerie -->
                <div class="power-category">
                    <h3>Powers of Faerie</h3>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="fae-enchanter" onchange="updatePowers()" data-cost="2" data-prereq="">
                            <span class="power-cost" id="fae-enchanter-cost">2</span>
                            Fae Enchanter
                        </label>
                        <div class="power-description">Requires: Faerie Heritage; Chaos (-1) Status and Intrigue. Local Glamour, Binding Promises, Minor Blessings/Curses</div>
                        <div class="power-level-container">
                            <label for="fae-enchanter-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="fae-enchanter-level" min="0" max="12" value="0" onchange="updatePowerLevel('fae-enchanter')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="advanced-fae" onchange="updatePowers()" data-cost="4" data-prereq="fae-enchanter" data-credit="fae-enchanter:-2">
                            <span class="power-cost" id="advanced-fae-cost">4</span>
                            Advanced Fae Enchanter
                        </label>
                        <div class="power-description">Requires: Faerie Heritage; Amber (0) Status and Intrigue, Chaos (-1) Lore. Widespread Glamour, Major Blessings/Curses</div>
                        <div class="power-level-container">
                            <label for="advanced-fae-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="advanced-fae-level" min="0" max="12" value="0" onchange="updatePowerLevel('advanced-fae')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                </div>

                <!-- Powers of Magick -->
                <div class="power-category">
                    <h3>Powers of Magick</h3>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="sorcery" onchange="updatePowers()" data-cost="3" data-prereq="">
                            <span class="power-cost" id="sorcery-cost">3</span>
                            Sorcery and Conjuration
                        </label>
                        <div class="power-description">Requires: Chaos (-1) Lore and power source. Develop Spell, Cast Spell, Conjure Shadow, Empowerment, Imbue, Create</div>
                        <div class="power-level-container">
                            <label for="sorcery-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="sorcery-level" min="0" max="12" value="0" onchange="updatePowerLevel('sorcery')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="invocation" onchange="updatePowers()" data-cost="3" data-prereq="" data-credit="sorcery:-1">
                            <span class="power-cost" id="invocation-cost">3</span>
                            Invocation
                        </label>
                        <div class="power-description">Requires: Chaos (-1) Psyche. True Name powers (Divine, Call, Summon, Banish, Compel, Bind), Purification</div>
                        <div class="power-level-container">
                            <label for="invocation-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="invocation-level" min="0" max="12" value="0" onchange="updatePowerLevel('invocation')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="runes" onchange="updatePowers()" data-cost="3" data-prereq="">
                            <span class="power-cost" id="runes-cost">3</span>
                            The Runes
                        </label>
                        <div class="power-description">Requires: Ranked (+1) Lore. Enhance/diminish powers, create/break connections, alter local reality</div>
                        <div class="power-level-container">
                            <label for="runes-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="runes-level" min="0" max="12" value="0" onchange="updatePowerLevel('runes')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="mirror-enchantment" onchange="updatePowers()" data-cost="2" data-prereq="">
                            <span class="power-cost" id="mirror-enchantment-cost">2</span>
                            Mirror Enchantment
                        </label>
                        <div class="power-description">Requires: Shroudling/Vampire Heritage; Chaos (-1) Psyche and Lore. Enchanted mirrors, travel mirror-lands, call forth reflections</div>
                        <div class="power-level-container">
                            <label for="mirror-enchantment-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="mirror-enchantment-level" min="0" max="12" value="0" onchange="updatePowerLevel('mirror-enchantment')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">1 pt per level</span>
                        </div>
                    </div>
                </div>

                <!-- Powers of the Ancients -->
                <div class="power-category">
                    <h3>Powers of the Ancients</h3>
                    <p style="font-size: 0.8em; color: #EFBF04; margin-bottom: 10px; text-align: center;">GM Approval Required</p>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="dominion" onchange="updatePowers()" data-cost="0" data-prereq="">
                            <span class="power-cost" id="dominion-cost">GM</span>
                            Dominion
                        </label>
                        <div class="power-description">Requires: Ancient Heritage; Ranked (+1) Psyche. Establish Domain, Empower Domain, Control Domain</div>
                        <div class="power-level-container">
                            <label for="dominion-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="dominion-level" min="0" max="12" value="0" onchange="updatePowerLevel('dominion')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">GM determines cost</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="essence" onchange="updatePowers()" data-cost="0" data-prereq="">
                            <span class="power-cost" id="essence-cost">GM</span>
                            Essence
                        </label>
                        <div class="power-description">Requires: Ancient Heritage; Ranked (+1) Strength and Endurance. True Form (Invoke, Reveal, Empower), Banner Control</div>
                        <div class="power-level-container">
                            <label for="essence-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="essence-level" min="0" max="12" value="0" onchange="updatePowerLevel('essence')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">GM determines cost</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="song" onchange="updatePowers()" data-cost="0" data-prereq="">
                            <span class="power-cost" id="song-cost">GM</span>
                            Song
                        </label>
                        <div class="power-description">Requires: Ancient Heritage; Ranked (+1) Psyche. Join The Song, Guide The Song, Add To The Song</div>
                        <div class="power-level-container">
                            <label for="song-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="song-level" min="0" max="12" value="0" onchange="updatePowerLevel('song')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">GM determines cost</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="making" onchange="updatePowers()" data-cost="0" data-prereq="">
                            <span class="power-cost" id="making-cost">GM</span>
                            Making
                        </label>
                        <div class="power-description">Requires: Ancient Heritage; Ranked (+1) Psyche. Create Substance, Create Essence, Enhance Existence</div>
                        <div class="power-level-container">
                            <label for="making-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="making-level" min="0" max="12" value="0" onchange="updatePowerLevel('making')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">GM determines cost</span>
                        </div>
                    </div>
                    <div class="power-item">
                        <label>
                            <input type="checkbox" id="unmaking" onchange="updatePowers()" data-cost="0" data-prereq="">
                            <span class="power-cost" id="unmaking-cost">GM</span>
                            Unmaking
                        </label>
                        <div class="power-description">Requires: Ancient Heritage; Ranked (+1) Psyche. Destroy Substance, Destroy Essence, Destroy Existence</div>
                        <div class="power-level-container">
                            <label for="unmaking-level" style="font-size: 0.8em; margin-top: 5px;">Level (0-12):</label>
                            <input type="number" id="unmaking-level" min="0" max="12" value="0" onchange="updatePowerLevel('unmaking')" disabled style="width: 60px; padding: 5px; font-size: 0.8em;">
                            <span style="font-size: 0.7em; color: #EFBF04; margin-left: 5px;">GM determines cost</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Extras -->
        <div class="section">
            <h2>Extras (Optional)</h2>
            <p style="margin-bottom: 20px; color: #cccccc;">GM approval required. Choose Simple (name + aspect + invokes) or Custom (detailed options below). <span style="color: #EFBF04;">UPDATED - Multi-instance support added!</span></p>

            <div id="extrasContainer">
                <!-- Extras will be dynamically added here -->
            </div>
            
            <div class="form-group">
                <button type="button" class="export-btn" onclick="addExtra()" style="font-size: 0.9em; padding: 10px 20px;">Add New Extra</button>
            </div>
            
        </div>

        <!-- Character Summary -->
        <div class="section">
            <h2>Character Summary</h2>
            <div id="characterSummary">
                <p>Select heritage, skills, and powers to see your character summary.</p>
            </div>
        </div>

        <!-- Export -->
        <div class="export-section">
            <button class="export-btn" onclick="exportCharacter()">Export Character</button>
            <button class="reset-btn" onclick="resetCharacter()">Reset All</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>